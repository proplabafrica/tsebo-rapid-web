<template>
  <div>
    <div>
      <select>
        <option>Generator one</option>
        <option>Generator two</option>
        <option>Generator three</option>
      </select>
    </div>
    <div class="row row-sm mg-t-20">
      <!-- Col-1 -->
      <div class="col-md-8 ht-auto pd-x-20">
        <!-- Top-row  -->
        <div class="col-sm-12 p-0">
          <div class="row row-xs mb-5">
            <!-- stats -->
            <div class="col-12 col-md">
              <div
                class="
                  card card-status
                  rounded
                  shadow-sm
                  justify-content-center
                "
              >
                <div class="media">
                  <svg
                    width="49"
                    height="49"
                    viewBox="0 0 49 49"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <circle cx="24.5" cy="24.5" r="24.5" fill="#CC0C07" />
                    <path
                      d="M31.5 9L26.802 10.24L23.649 9L18.5 26.177H23.9325L19.176 39L30.825 21.824H23.813L31.5 9Z"
                      fill="#1F3E27"
                    />
                  </svg>
                  <div class="media-body">
                    <h1>200 KWA</h1>
                    <p>Power</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12 col-md">
              <div
                class="
                  card card-status
                  rounded
                  shadow-sm
                  justify-content-center
                "
              >
                <div class="media">
                  <svg
                    width="49"
                    height="49"
                    viewBox="0 0 49 49"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <circle cx="24.5" cy="24.5" r="24.5" fill="#5F744C" />
                    <path
                      d="M20.2945 17.6493L24.3692 34.972C24.6798 36.296 26.5425 36.3587 26.9412 35.0587L30.8678 22.2853L31.3798 24.3213C31.4523 24.6094 31.6189 24.865 31.8532 25.0477C32.0875 25.2303 32.3761 25.3294 32.6732 25.3293H36.9998C37.3535 25.3293 37.6926 25.1889 37.9426 24.9388C38.1927 24.6888 38.3332 24.3496 38.3332 23.996C38.3332 23.6424 38.1927 23.3032 37.9426 23.0532C37.6926 22.8031 37.3535 22.6627 36.9998 22.6627H33.7118L32.2865 17.008C31.9572 15.7 30.1158 15.652 29.7198 16.9413L25.8372 29.5707L21.6332 11.6947C21.3132 10.3347 19.3825 10.3213 19.0425 11.676L16.2892 22.6627H12.9998C12.6462 22.6627 12.3071 22.8031 12.057 23.0532C11.807 23.3032 11.6665 23.6424 11.6665 23.996C11.6665 24.3496 11.807 24.6888 12.057 24.9388C12.3071 25.1889 12.6462 25.3293 12.9998 25.3293H17.3292C17.6264 25.3293 17.9151 25.23 18.1494 25.0471C18.3838 24.8643 18.5503 24.6083 18.6225 24.32L20.2945 17.6493Z"
                      fill="#181B19"
                    />
                  </svg>
                  <div class="media-body">
                    <h1>300 A</h1>
                    <p>Current</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12 col-md">
              <div
                class="
                  card card-status
                  rounded
                  shadow-sm
                  justify-content-center
                "
              >
                <div class="media">
                  <svg
                    width="49"
                    height="49"
                    viewBox="0 0 49 49"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <circle cx="24.5" cy="24.5" r="24.5" fill="#1D5078" />
                    <path
                      d="M17 14V16H21V14H17ZM29 14V16H33V14H29ZM13 17V35H37V17H13ZM15 19H35V33H15V19ZM29 23V25H27V27H29V29H31V27H33V25H31V23H29ZM17 25V27H23V25H17Z"
                      fill="#AFC834"
                    />
                  </svg>
                  <div class="media-body">
                    <h1>300 A</h1>
                    <p>Battery Voltage</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12 col-md">
              <div
                class="
                  card card-status
                  rounded
                  shadow-sm
                  justify-content-center
                "
              >
                <div class="media">
                  <svg
                    width="49"
                    height="49"
                    viewBox="0 0 49 49"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <circle cx="24.5" cy="24.5" r="24.5" fill="#12AEB8" />
                    <path
                      d="M26.5 27.508V16.626H22.5V27.506C21.097 28.234 20.126 29.686 20.126 31.376C20.1432 32.525 20.6117 33.6211 21.4303 34.4276C22.2489 35.2341 23.3519 35.6862 24.501 35.6864C25.6501 35.6865 26.7532 35.2346 27.572 34.4283C28.3907 33.622 28.8595 32.526 28.877 31.377C28.877 29.687 27.907 28.235 26.501 27.509L26.5 27.508ZM29.5 13.248C29.5 10.492 27.256 8.248 24.5 8.248C21.744 8.248 19.5 10.493 19.5 13.248V25.975C18.7508 26.6608 18.1528 27.4952 17.7438 28.4249C17.3349 29.3546 17.1242 30.3593 17.125 31.375C17.125 35.441 20.435 38.752 24.501 38.752C28.567 38.752 31.876 35.442 31.876 31.375C31.876 29.289 30.998 27.345 29.501 25.973V13.25L29.5 13.248ZM29.875 31.378C29.8731 32.8027 29.3062 34.1685 28.2985 35.1756C27.2908 36.1827 25.9247 36.7489 24.5 36.75C23.0756 36.7481 21.71 36.1815 20.7028 35.1742C19.6955 34.167 19.1289 32.8014 19.127 31.377C19.127 29.582 20.023 27.934 21.503 26.939V13.25C21.503 11.597 22.846 10.25 24.5 10.25C26.154 10.25 27.5 11.596 27.5 13.25V26.94C28.2306 27.4269 28.8296 28.0866 29.2439 28.8607C29.6582 29.6347 29.875 30.4991 29.875 31.377V31.378ZM31.085 16.626L35.585 19.224V14.03L31.085 16.626V16.626Z"
                      fill="#CC0C07"
                    />
                  </svg>
                  <div class="media-body">
                    <h1>300 C</h1>
                    <p>Coolant Temperature</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Bottom - row -->
        <div class="col-sm-12">
          <div class="row justify-content-start align-content-stretch h-100">
            <!-- stats -->
            <div
              class="
                col-xl col-xl-5 col-lg col-lg-5 col-md col-md-5 col-sm col-sm-5
                pd-0
                pr-3
              "
            >
              <div class="card pd-10 rounded shadow-sm w-auto">
                <apexchart
                  class="card-img"
                  height="500"
                  width="100%"
                  type="bar"
                  :options="options"
                  :series="series"
                ></apexchart>
              </div>
            </div>
            <!-- image -->
            <div
              class="
                col-xl col-xl-7 col-lg col-lg-7 col-md col-md-7 col-sm col-sm-7
                pd-0
              "
            >
              <div class="card pd-10 rounded shadow-sm">
                <apexchart
                  class="card-img"
                  height="500"
                  width="100%"
                  type="bar"
                  :options="options"
                  :series="series"
                ></apexchart>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Col -2  -->
      <div class="col col-md-4 pd-x-20">
        <div class="card rounded shadow-sm">
          <div class="justify-content-between align-items-center">
            <!-- Header -->
            <div class="d-block card-header pd-x-20">
              <h4>Generator One</h4>
              <h5>10:12:21</h5>
            </div>
          </div>

          <!-- Section-a -->
          <div
            class="
              d-flex
              justify-content-between
              align-items-center
              card-body
              bg-iot-card
            "
          >
            <!-- Chart Summary -->
            <div class="d-flex justify-content-center bd-info">
              <h4>Generator Metrics Image</h4>
            </div>

            <div class="d-flex flex-column align-items-end pd-x-20 pd-t-10">
              <div class="text-right">
                <h5>32 KW/H</h5>
                <div class="mr-2 bd-info">Estimated Run Hour</div>
                <h5>32 KW/H</h5>
                <div class="mr-2 bd-info">Estimated Run Hour</div>
                <h5>32 KW/H</h5>
                <div class="mr-2 bd-info">Estimated Run Hour</div>
              </div>
            </div>
          </div>

          <!-- Section-b -->
          <!-- <div class="p-0 pr-1 pl-1 card-body"> -->
          <div class="card-body bg-iot-card">
            <div class="p-0 d-block tx-14 tx-normal">
              <div
                class="d-flex text-left justify-content-between pd-x-20 pd-t-10"
              >
                <div class="text-right">Voltage</div>
                <h5 class="text-left tx-inverse">0.00 V</h5>
              </div>
              <div
                class="d-flex text-left justify-content-between pd-x-20 pd-t-10"
              >
                <div class="text-right">Current</div>
                <h5 class="text-left tx-inverse">0.00 KWA</h5>
              </div>
              <div
                class="d-flex text-left justify-content-between pd-x-20 pd-t-10"
              >
                <div class="text-right">Frequency</div>
                <h5 class="text-left tx-inverse">0.00 Hz</h5>
              </div>
              <div
                class="d-flex text-left justify-content-between pd-x-20 pd-t-10"
              >
                <div class="text-right">Power</div>
                <h5 class="text-left tx-inverse">0.00 KW</h5>
              </div>
              <div
                class="d-flex text-left justify-content-between pd-x-20 pd-t-10"
              >
                <div class="text-right">Power Factor</div>
                <h5 class="text-left tx-inverse">0.00</h5>
              </div>
              <div
                class="d-flex text-left justify-content-between pd-x-20 pd-t-10"
              >
                <div class="text-right">Engiine RPM</div>
                <h5 class="text-left tx-inverse">0.00 RPM</h5>
              </div>
              <div
                class="d-flex text-left justify-content-between pd-x-20 pd-t-10"
              >
                <div class="text-right">Battery Voltage</div>
                <h5 class="text-left tx-inverse">0.00 V</h5>
              </div>
              <div
                class="d-flex text-left justify-content-between pd-x-20 pd-t-10"
              >
                <div class="text-right">Coolant Temperature</div>
                <h5 class="text-left tx-inverse">0.00 C</h5>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- row 2-1 -->
    <div class="row row-sm mg justify-content-between mg-t-40">
      <div class="col col-lg-8">
        <!-- Col - 1 -->
        <div class="card rounded shadow-sm flex-row">
          <div class="col-md-4 bg-iot-card pd-0">
            <div
              class="w-auto"
              v-for="(param, index) in parameters"
              :key="`param ${param}${index}`"
            >
              <div class="pd-x-20 pd-y-10 card-item">
                {{ param }}
              </div>
            </div>
          </div>

          <!-- Col - 2 -->
          <div class="col col-md-8">
            <apexchart
              height="300"
              type="line"
              :options="options"
              :series="series"
            ></apexchart>
          </div>
        </div>
      </div>

      <!-- Col - 2 -->
      <div class="col-lg-4">
        <div class="card rounded shadow-sm">
          <div class="card-body bg-iot-card">
            <div class="p-0 d-block">
              <h6>Activity</h6>
              <div
                class="d-flex text-left justify-content-between pd-x-20 pd-y-10"
                v-for="(activity, index) in activityList"
                :class="activity.status == 'ON' ? 'on' : 'off'"
                :key="`activity-${index}`"
              >
                <div class="text-left">
                  {{ activity.name }}
                </div>
                <div class="text-right">
                  {{ activity.time }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
/**
 * TODO
 * Switch activities to top row
 * Make bottom row stretch to meet activities column
 */
import { mapActions } from "vuex";
import loading from "@/components/ui/loading";
import requests from "@/components/hagul/dashboard/requests";
import performanceTabs from "@/components/performance/hagul/tabs";
import authMixin from "@/mixins/iot/auth";

export default {
  components: { requests, performanceTabs },
  head: () => ({
    title: "Dashboard · IOT"
  }),
  meta: {
    pageName: "generator-metrics.index"
  },
  data: () => ({
    parameters: [
      "Voltage",
      "Current",
      "Power",
      "Engine RPM",
      "Battery Voltage",
      "Frequency",
      "Current"
    ],
    activityList: [
      { name: "Generator ON", time: "03:12:21", status: "ON" },
      { name: "Generator OFF", time: "02:12:21", status: "OFF" },
      { name: "Generator ON", time: "02:12:21", status: "ON" },
      { name: "Generator OFF", time: "01:12:21", status: "OFF" }
    ],
    pieOptions: {
      chart: {
        height: 20,
        type: "radialBar"
      },
      series: [67],
      colors: ["#20E647"],
      plotOptions: {
        radialBar: {
          hollow: {
            margin: 0,
            size: "70%",
            background: "#293450"
          },
          track: {
            dropShadow: {
              enabled: true,
              top: 2,
              left: 0,
              blur: 4,
              opacity: 0.15
            }
          },
          dataLabels: {
            name: {
              offsetY: -10,
              color: "#fff",
              fontSize: "13px"
            },
            value: {
              color: "#fff",
              fontSize: "30px",
              show: true
            }
          }
        }
      },
      fill: {
        type: "gradient",
        gradient: {
          shade: "dark",
          type: "vertical",
          gradientToColors: ["#87D4F9"],
          stops: [0, 100]
        }
      },
      stroke: {
        lineCap: "round"
      },
      labels: ["Progress"]
    },
    pieSeries: [67],

    options: {
      chart: {
        id: "vuechart-example"
      },
      xaxis: {
        categories: [
          "03:00",
          "06:00",
          "09:00",
          "12:00",
          "15:00",
          "18:00",
          "21:00"
        ]
      },
      legend: {
        position: "left",
        horizontalAlign: "center",
        fontSize: "14px",
        markers: {
          width: 10,
          height: 10
        },
        itemMargin: {
          horizontal: 0,
          vertical: 2
        }
      }
    },
    series: [
      {
        name: "series-1",
        data: [0, 0, 0, 2, 5, 0, , 0]
      }
    ]
  }),
  middleware: ["auth", "roleGuard"],
  mixins: [authMixin]
};
</script>
